function loadStatistical(e){var a=document.getElementById("fcircleContainer"),t=`\n  <h2>统计信息</h2>\n  <div class="fUpdatedTime">\n    <span class="fLabel">最近更新时间：</span><span class="fMessage">${e.last_updated_time}</span>\n  </div>\n  <div id="fMessageBoard">\n    <div class="fMessageItem">\n      <div class="fActiveFriend fItem">\n        <span class="fLabel">当前友链个数：</span>\n        <span class="fMessage">${e.friends_num} 个</span>\n      </div>\n      <div class="fActiveFriend fItem">\n        <span class="fLabel">活跃友链数：</span>\n        <span class="fMessage">${e.active_num} 个</span>\n      </div>\n      <div class="fErrorSite fItem">\n        <span class="fLabel">失联友链数：</span>\n        <span class="fMessage">${e.error_num} 个</span>\n      </div>\n      <div class="fArticleNum fItem">\n        <span class="fLabel">当前库存文章：</span>\n        <span class="fMessage">${e.article_num} 个</span>\n      </div>\n    </div>\n    <div id="switchRankBtn">\n      <span id="rankByCreated">按发表时间排序</span>\n      <span>\n      <input type="checkbox" id="switchRankMode" checked="true" onchange="checkRankMode()"/><label for="switchRankMode" id="switchRank">Toggle</label>\n      </span>\n      <span id="rankByUpdated">按更新时间排序</span>\n    </div>\n  </div>\n  `;a&&(a.insertAdjacentHTML("beforebegin",t),a.insertAdjacentHTML("afterend",'\n  <div id="fcircleMoreBtn" onclick="loadMoreArticle()">\n    <i class="fas fa-angle-double-down"></i>\n  </div>\n  '))}function loadArticleItem(e,a,t){var n=JSON.parse(localStorage.getItem("fdatalist")),i=document.getElementById("fcircleContainer");let s=t;e[t-1]||(s=e.length);for(var l=a;l<s;l++){var r=e[l],c=`\n      <div class="fArticleItem">\n        <div class="fArticleAvatar">\n          <a class="fArticlelink fAvatar" target="_blank" rel="noopener nofollow" href="${r.link}">\n            <img src="${r.avatar}" alt="avatar"  onerror="this.src='${n.error_img}'; this.onerror = null;">\n          </a>\n          <div class="fArticleAuthor">\n            ${r.author}\n          </div>\n        </div>\n        <div class="fArticleMessage">\n          <a class="fArticleTitle"  href="${r.link}" target="_blank" rel="noopener nofollow" data-title="${r.title}">\n            ${r.title}\n          </a>\n          <div class="fArticleTime">\n            <span class="fArticleCreated"><i class="far fa-calendar-alt">发表于</i>${r.created}</span>\n            <span class="fArticleUpdated"><i class="fas fa-history"><span style="font-weight: 500;">更新于<span/></i>${r.updated}</span>\n          </div>\n        </div>\n      </div>\n    `;i&&i.insertAdjacentHTML("beforeend",c)}}function initFriendCircle(){var e=document.getElementById("fcircleContainer"),a=JSON.parse(localStorage.getItem("statisticalList")),t=JSON.parse(localStorage.getItem("fdatalist"));e&&a&&t&&(loadStatistical(a),document.getElementById("switchRankMode").checked?loadArticleItem(JSON.parse(localStorage.getItem("updatedList")),0,t.initnumber):loadArticleItem(JSON.parse(localStorage.getItem("createdList")),0,t.initnumber))}function loadMoreArticle(){var e=document.getElementsByClassName("fArticleItem").length,a=document.getElementById("switchRankMode"),t=JSON.parse(localStorage.getItem("fdatalist"));if(a&&t){var n=JSON.parse(localStorage.getItem("updatedList")),i=JSON.parse(localStorage.getItem("createdList"));if(e===i.length||e===n.length){if(GLOBAL_CONFIG.Snackbar){var s="light"===document.documentElement.getAttribute("data-theme")?GLOBAL_CONFIG.Snackbar.bgLight:GLOBAL_CONFIG.Snackbar.bgDark,l=GLOBAL_CONFIG.Snackbar.position;Snackbar.show({text:"✨ 到底啦，没有文章了喔~",backgroundColor:s,duration:5e3,pos:l,actionText:"🍗点击催更🍔",actionTextColor:"#fff",onActionClick:function(e){location.href="https://mail.qq.com/cgi-bin/qm_share?t=qm_mailme&email=2268025923@qq.com"}})}}else a.checked?loadArticleItem(n,e,e+t.stepnumber):loadArticleItem(i,e,e+t.stepnumber),window.scrollBy(0,180)}}function checkRankMode(){document.getElementById("fcircleContainer").innerHTML="";var e=document.getElementById("switchRankMode"),a=JSON.parse(localStorage.getItem("fdatalist"));e&&a&&(e.checked?loadArticleItem(JSON.parse(localStorage.getItem("updatedList")),0,a.initnumber):loadArticleItem(JSON.parse(localStorage.getItem("createdList")),0,a.initnumber))}initFriendCircle();